<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">
    <title>Class Randomizer</title>
    <!-- <embed src="rstheme.mp3" autostart="true" loop="true"></embed> -->
    <link href="css.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/Bing.js"></script>

  </head>

<body>
  <table class = "table">
    <tbody>
      <tr>
        <td>Primary: </td><td id = "primary">TEST</td><td id = "attach0">TEST</td><td id="attach1">TEST</td>
      </tr>
      <tr>
        <td>Secondary: </td><td id = "secondary">TEST</td><td id = "SECattach0">TEST</td><td id="SECattach1">TEST</td>
      </tr>
      <tr>
        <td>Equipment: </td><td id = "equipment">TEST</td>
      </tr>
      <tr>
        <td>Special Grenade: </td><td id = "specGrenade">TEST</td>
      </tr>
      <tr>
        <td>Perk 1: </td><td id = "perk1">TEST</td>
      </tr>
      <tr>
        <td>Perk 2: </td><td id = "perk2">TEST</td>
      </tr>
      <tr>
        <td>Perk 3: </td><td id = "perk3">TEST</td>
      </tr>
      <tr>
        <td>Death Streak: </td><td id = "deathStreak">TEST</td>
      </tr>
    </tbody>
  </table>

  <button type="button" id="submitButton"  onclick="randomize()">Randomize!</button></p>
  <script>
    'use strict';

    $(document).ready(() => {
      setUp();
    });

  //Since each type of gun has different attachments, I suggest we make a class of gun with the
  //the gun name, its type (assaul, sub, etc.) so that we can give it the right attachments.

  //******* DON'T FORGET THE RIOT SHIELD IN THE ARRAY OF ALL THE PRIMARIES*******

  var primaries =[];
  var secondaries =[];
  var attachNum =1;
function randomize() {
  //readArray(secondaries);

  //since the number of attatchments depends on whether of not perk 1 is bling, lets start with perks
  var perkOne = perk1[Math.floor(Math.random() * perk1.length)];
        if (perkOne === "Bling"){
          attachNum = 2;
        }
        else if(perkOne === "One Man Army"){                                     //set secondary and attachments to defualt with 1MA
          document.getElementById("secondary").innerHTML= 'TEST';
          document.getElementById("SECattach0").innerHTML = "TEST";
          document.getElementById("SECattach1").innerHTML = "TEST";
        }
        else {
          attachNum = 1;            //set it back to 1
          document.getElementById("attach1").innerHTML = "TEST";        //set the attatchment back to default
          document.getElementById("SECattach1").innerHTML = "TEST";
        }
  document.getElementById('perk1').innerHTML = perkOne;

  var perkTwo = perk2[Math.floor(Math.random() * perk2.length)];
  document.getElementById('perk2').innerHTML = perkTwo;

  var perkThree = perk3[Math.floor(Math.random() * perk3.length)];
  document.getElementById('perk3').innerHTML = perkThree;

  var dStreak = deathStreak[Math.floor(Math.random() * deathStreak.length)];
  document.getElementById('deathStreak').innerHTML = dStreak;

  var equip = equipment[Math.floor(Math.random() * equipment.length)];              //Could i just put this equation
  document.getElementById('equipment').innerHTML = equip;                           // Down here and skip the variable declaration?

  var specGrenade = specialGrenade[Math.floor(Math.random() * specialGrenade.length)];
  document.getElementById('specGrenade').innerHTML = specGrenade;

  var primaryWeapon = primaries[Math.floor(Math.random() * primaries.length)];
  document.getElementById("primary").innerHTML = primaryWeapon.name;

  var primaryType = primaryWeapon.type;
  var attType;
    if(primaryType === "Assault"){
      attType = assaultAtt;
    }
    else if(primaryType === "SMG"){
      attType = smgAtt;
    }
    else if (primaryType === "LMG"){
      attType = lmgAtt;
    }
    else if (primaryType === "Sniper"){
      attType = sniperAtt;
    }

var AttLocation =[];

  for(let i=0; i<attachNum; i++){
      var element = "attach" + i;
      var att = attType[Math.floor(Math.random() * attType.length)]
      if(sights.indexOf(att)>=0){
        AttLocation[i] = "Sight";
      }
      else if (underBelly.indexOf(att)>=0){
        AttLocation[i] = "Under Belly";
      }
      document.getElementById(element).innerHTML = att;
  }

  if (attachNum === 2 && AttLocation[0] === AttLocation[1]){
    let tempAttLoc = AttLocation[0];
    if (tempAttLoc === "Sight") {
      AttLocation[1] = "Under Belly";
    } else {
      (tempAttLoc === "Sight");
    }
  }

var secondaryWeapon = secondaries[Math.floor(Math.random() * secondaries.length)];
if(perkOne!= "One Man Army"){
  document.getElementById("secondary").innerHTML = secondaryWeapon.name;
}

var secondaryType = secondaryWeapon.type;
var secAttType;
  if(secondaryType === "Pistol"){
    secAttType = pistolAtt;
  }
  else if(secondaryType === "Big Pistol"){
    secAttType = bigPistolAtt ;
  }
  else if (secondaryType === "Shotgun"){
    secAttType= shotgunAtt;
  }
  else if (secondaryType === "Pirate Shotgun"){
    secAttType = pirateGunAtt;
  }
  else if(secondaryType=== "Machine Pistol"){
    secAttType = machinePistolAtt;
  }
  else if (secondaryType === "Launcher"){                             //if Launcher set Attachment back to default
    document.getElementById("SECattach0").innerHTML = "TEST";
    document.getElementById("SECattach1").innerHTML = "TEST";
  }


  if (secondaryType !== "Launcher") {
    for(let i=0; i<attachNum; i++){
        var element = "SECattach" + i;
        document.getElementById(element).innerHTML = secAttType[Math.floor(Math.random() * secAttType.length)]
      }
  }



};



function setUp() {
  //Eventally this will be added to an "onload event" but for testing its on button click for now
  //setup the primaries array
  for(let i=0; i<assaultRifles.length;i++){
      var temp = new gunClass (assaultRifles[i], "Assault");
      primaries.push(temp);
      }
  for(let i=0; i<subMachineGuns.length;i++){
      var temp = new gunClass (subMachineGuns[i], "SMG");
      primaries.push(temp);
      }
  for(let i=0; i<lightMachineGuns.length;i++){
      var temp = new gunClass (lightMachineGuns[i], "LMG");
      primaries.push(temp);
      }
  for(let i=0; i<sniperRifles.length;i++){
      var temp = new gunClass (sniperRifles[i], "Sniper");
      primaries.push(temp);
      }
  var temp = new gunClass ("Riot Shield", "Riot Shield");               //Don't forget riot shield!
    primaries.push(temp);

//setup the secondaries ARRAY
  for(let i=0; i<pistols.length;i++){
    if(pistols[i] != "Colt .44 Magnum" && pistols[i]!= "Desert Eagle"){
        var temp = new gunClass (pistols[i], "Pistol");
        secondaries.push(temp);
      }
    else{
      var temp = new gunClass (pistols[i], "Big Pistol");
      secondaries.push(temp);
      }
    }
  for(let i=0; i<machinePistols.length;i++){
      var temp = new gunClass (machinePistols[i], "Machine Pistol");
      secondaries.push(temp);
      }
  for(let i=0; i<shotguns.length;i++){
    if(shotguns[i]!== "Ranger" && shotguns[i] !== "Model 1887"){
        var temp = new gunClass (shotguns[i], "Shotgun");
        secondaries.push(temp);
      }
    else{
      var temp = new gunClass (shotguns[i], "Pirate Shotgun");
      secondaries.push(temp);
      }
    }
  for(let i=0; i<launchers.length;i++){
      var temp = new gunClass (launchers[i], "Launcher");
      secondaries.push(temp);
    }

};

function gunClass (name, type){
    this.name = name;
    this.type = type;
  };


  function readArray(xxx){
    for (i=0; i<xxx.length; i++){
      var temp = xxx[i].name + " " + xxx[i].type;
      console.log(temp);
    }
  }


  var assaultRifles = [
    "M4A1",
    "FAMAS",
    "SCAR-H",
    "TAR-21",
    "FN FAL",
    "M16A4",
    "ACR",
    "F2000",
    "AK-47"
];

var subMachineGuns = [
    "Mini Uzi",
    "MP5K",
    "UMP 45",
    "Vector",
    "P90"
];

var sniperRifles = [
"Intervention",
"Barrett",
"WA2000",
"M21 EBR"
];

var lightMachineGuns = [
"L86 LSW",
"RPD",
"MG4",
"AUG HBAR",
"M240"
];

var shotguns = [
"SPAS-12",
"AA-12",
"Striker",
"Ranger",
"M1014",
"Model 1887"
];

var pistols = [
"USP .45",
"Colt .44 Magnum",
"M9",
"Desert Eagle"
];

var machinePistols = [
"Glock 18",
"PP-2000",
"TMP",
"M93 Raffica",
];

var launchers = [
  "AT4",
  "Thumper",
  "Stinger",
  "RPG",
  "Javelin",
];


var specialGrenade = [
    "Flashbang",
    "Stun Grenade",
    "Smoke Grenade",
  ];

  var equipment = [
    "Frag Grenades",
    "Semtex",
    "Claymore",
    "C4",
    "Tactical Insertion",
    "Blast Shield",
    "Throwing Knife"
];

var assaultAtt = [
  "Grenade Launcher",
  "Red Dot Sight",
  "Silencer",
  "ACOG Scope",
  "FMJ",
  "Shotgun",
  "Holographic Sight",
  "Heartbeat Sensor",
  "Thermal Scope",
  "Extended Mags"
];

var smgAtt =[
  "Rapid Fire",
  "Red Dot Sight",
  "Silencer",
  "ACOG Scope",
  "FMJ",
  "Akimbo",
  "Holographic Sight",
  "Thermal Scope",
  "Extended Mags"
];

var lmgAtt = [
  "Grip",
  "Red Dot Sight",
  "Silencer",
  "ACOG Scope",
  "FMJ",
  "Holographic Sight",
  "Heartbeat Sensor",
  "Thermal Scope",
  "Extended Mags"
];

var sniperAtt =[
  "Silencer",
  "ACOG Scope",
  "FMJ",
  "Hearbeat Sensor",
  "Thermal",
  "Extended Mags"
];

var pistolAtt=[
  "FMJ",
  "Silencer",
  "Akimbo",
  "Tactical Knife",
  "Extended Mags"
];

var bigPistolAtt=[
  "FMJ",
  "Akimbo",
  "Tactical Knife"
];

var shotgunAtt =[
  "Red Dot Sight",
  "Silencer",
  "Grip",
  "FMJ",
  "Holographic Sight",
  "Extended Mags"
];

var pirateGunAtt =[
  "Akimbo",
  "FMJ"
];

var machinePistolAtt =[
  "Red Dot Sight",
  "Silencer",
  "FMJ",
  "Akimbo",
  "Holographic Sight",
  "Extended Mags"
]

var perk1 = [
  "Marathon",
  "Sleight of Hand",
  "Scavenger",
  "Bling",
  "One Man Army"
];

var perk2 = [
  "Stopping Power",
  "Danger Close",
  "Cold Blooded",
  "Hardline",
  "Lightweight"
];

var perk3 = [
  "Ninja",
  "Scrambler",
  "Steady Aim",
  "Last Stand",
  "Commando"
];

var deathStreak = [
  "Copy Cat",
  "Painkillers",
  "Martyrdom",
  "Final Stand"
];

var sights = [
  "Red Dot Sight",
  "ACOG Scope",
  "Thermal Scope",
  "Holographic Sight"
];

var underBelly = [
  "Grenade Launcher",
  "Shotgun"
];


</script>
